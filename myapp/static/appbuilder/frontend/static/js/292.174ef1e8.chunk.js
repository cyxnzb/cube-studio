"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[292],{43292:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var r=t(4942),l=t(1413),a=t(74165),i=t(15861),o=t(29439),c=t(37762),s=t(4519),u=t(2028),d=t(10089),v=t(93849),m=t(8230),f=t(10007),p=t(20011),h=t(12513),b=t(71002),x=t(43270),Z=t.n(x),y=t(77935),w=t(48698),g=t(90690),j=t(37671),N=function(e){return e.children},S=t(87462);function _(e){return void 0!==e&&null!==e}var k=function(e){var n,t=e.itemPrefixCls,l=e.component,a=e.span,i=e.className,o=e.style,c=e.labelStyle,u=e.contentStyle,d=e.bordered,v=e.label,m=e.content,f=e.colon,p=l;return d?s.createElement(p,{className:Z()((n={},(0,r.Z)(n,"".concat(t,"-item-label"),_(v)),(0,r.Z)(n,"".concat(t,"-item-content"),_(m)),n),i),style:o,colSpan:a},_(v)&&s.createElement("span",{style:c},v),_(m)&&s.createElement("span",{style:u},m)):s.createElement(p,{className:Z()("".concat(t,"-item"),i),style:o,colSpan:a},s.createElement("div",{className:"".concat(t,"-item-container")},(v||0===v)&&s.createElement("span",{className:Z()("".concat(t,"-item-label"),(0,r.Z)({},"".concat(t,"-item-no-colon"),!f)),style:c},v),(m||0===m)&&s.createElement("span",{className:Z()("".concat(t,"-item-content")),style:u},m)))};function E(e,n,t){var r=n.colon,l=n.prefixCls,a=n.bordered,i=t.component,o=t.type,c=t.showLabel,u=t.showContent,d=t.labelStyle,v=t.contentStyle;return e.map((function(e,n){var t=e.props,m=t.label,f=t.children,p=t.prefixCls,h=void 0===p?l:p,b=t.className,x=t.style,Z=t.labelStyle,y=t.contentStyle,w=t.span,g=void 0===w?1:w,j=e.key;return"string"===typeof i?s.createElement(k,{key:"".concat(o,"-").concat(j||n),className:b,style:x,labelStyle:(0,S.Z)((0,S.Z)({},d),Z),contentStyle:(0,S.Z)((0,S.Z)({},v),y),span:g,colon:r,component:i,itemPrefixCls:h,bordered:a,label:c?m:null,content:u?f:null}):[s.createElement(k,{key:"label-".concat(j||n),className:b,style:(0,S.Z)((0,S.Z)((0,S.Z)({},d),x),Z),span:1,colon:r,component:i[0],itemPrefixCls:h,bordered:a,label:m}),s.createElement(k,{key:"content-".concat(j||n),className:b,style:(0,S.Z)((0,S.Z)((0,S.Z)({},v),x),y),span:2*g-1,component:i[1],itemPrefixCls:h,bordered:a,content:f})]}))}var C=function(e){var n=s.useContext(P),t=e.prefixCls,r=e.vertical,l=e.row,a=e.index,i=e.bordered;return r?s.createElement(s.Fragment,null,s.createElement("tr",{key:"label-".concat(a),className:"".concat(t,"-row")},E(l,e,(0,S.Z)({component:"th",type:"label",showLabel:!0},n))),s.createElement("tr",{key:"content-".concat(a),className:"".concat(t,"-row")},E(l,e,(0,S.Z)({component:"td",type:"content",showContent:!0},n)))):s.createElement("tr",{key:a,className:"".concat(t,"-row")},E(l,e,(0,S.Z)({component:i?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},n)))},P=s.createContext({}),z={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function L(e,n,t){var r=e;return(void 0===n||n>t)&&(r=(0,g.Tm)(e,{span:t})),r}function H(e){var n,t=e.prefixCls,l=e.title,a=e.extra,i=e.column,c=void 0===i?z:i,u=e.colon,d=void 0===u||u,v=e.bordered,m=e.layout,f=e.children,p=e.className,h=e.style,x=e.size,g=e.labelStyle,N=e.contentStyle,S=s.useContext(w.E_),_=S.getPrefixCls,k=S.direction,E=_("descriptions",t),H=s.useState({}),M=(0,o.Z)(H,2),R=M[0],V=M[1],T=function(e,n){if("number"===typeof e)return e;if("object"===(0,b.Z)(e))for(var t=0;t<j.c4.length;t++){var r=j.c4[t];if(n[r]&&void 0!==e[r])return e[r]||z[r]}return 3}(c,R);s.useEffect((function(){var e=j.ZP.subscribe((function(e){"object"===(0,b.Z)(c)&&V(e)}));return function(){j.ZP.unsubscribe(e)}}),[]);var q=function(e,n){var t=(0,y.Z)(e).filter((function(e){return e})),r=[],l=[],a=n;return t.forEach((function(e,i){var o,c=null===(o=e.props)||void 0===o?void 0:o.span,s=c||1;if(i===t.length-1)return l.push(L(e,c,a)),void r.push(l);s<a?(a-=s,l.push(e)):(l.push(L(e,s,a)),r.push(l),a=n,l=[])})),r}(f,T),B=s.useMemo((function(){return{labelStyle:g,contentStyle:N}}),[g,N]);return s.createElement(P.Provider,{value:B},s.createElement("div",{className:Z()(E,(n={},(0,r.Z)(n,"".concat(E,"-").concat(x),x&&"default"!==x),(0,r.Z)(n,"".concat(E,"-bordered"),!!v),(0,r.Z)(n,"".concat(E,"-rtl"),"rtl"===k),n),p),style:h},(l||a)&&s.createElement("div",{className:"".concat(E,"-header")},l&&s.createElement("div",{className:"".concat(E,"-title")},l),a&&s.createElement("div",{className:"".concat(E,"-extra")},a)),s.createElement("div",{className:"".concat(E,"-view")},s.createElement("table",null,s.createElement("tbody",null,q.map((function(e,n){return s.createElement(C,{key:n,index:n,colon:d,prefixCls:E,vertical:"vertical"===m,bordered:v,row:e})})))))))}H.Item=N;var M=H,R=t(38827),V=t(81866),T=t(58021),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},B=t(29465),I=function(e,n){return s.createElement(B.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:n,icon:q}))};I.displayName="ArrowLeftOutlined";var A=s.forwardRef(I),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},F=function(e,n){return s.createElement(B.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:n,icon:D}))};F.displayName="SaveOutlined";var O=s.forwardRef(F),G=t(61749),$=t(68739),J=function(){return $.Z.get("/userinfo/api/current/userinfo")},K=t(81748),Q=t(2556),U=u.Z.Title,W=u.Z.Text;function X(e,n){if(null===e||void 0===e||""===e)return n;if("boolean"===typeof e)return e?"True":"False";var t=String(e).trim();return""===t?n:t}function Y(e,n,t){if(!n||!Array.isArray(n)||0===n.length)return null;var r,l=null==e?"":String(e).trim(),a=null!=t.label?String(t.label).trim():"",i=(0,c.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.type||"",u=!1;if("DataRequired"===s)u=""===l;else{if("Regexp"!==s||!o.regex)continue;try{u=!new RegExp(o.regex).test(l)}catch(d){continue}}if(u)return"DataRequired"===s&&""===l?a?"\u8bf7\u8f93\u5165".concat(a):"\u8bf7\u586b\u5199":"\u8bf7\u6309\u6b63\u786e\u7684\u89c4\u5219\u8f93\u5165"}}catch(v){i.e(v)}finally{i.f()}return null}var ee=function(){var e=(0,K.$G)().t,n=(0,s.useState)(!0),t=(0,o.Z)(n,2),u=t[0],b=t[1],x=(0,s.useState)(!1),Z=(0,o.Z)(x,2),y=Z[0],w=Z[1],g=(0,s.useState)(!1),j=(0,o.Z)(g,2),N=j[0],S=j[1],_=(0,s.useState)(null),k=(0,o.Z)(_,2),E=k[0],C=k[1],P=(0,s.useState)(null),z=(0,o.Z)(P,2),L=z[0],H=z[1],q=(0,s.useState)({}),B=(0,o.Z)(q,2),I=B[0],D=B[1],F=(0,s.useState)({}),ee=(0,o.Z)(F,2),ne=ee[0],te=ee[1];(0,s.useEffect)((function(){re()}),[]);var re=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(){var t,r,l,i,c,s,u,v,m,f,p,h,x,Z,y,w,g,j,N;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b(!0),n.prev=1,n.next=4,Promise.all([$.Z.get("/userinfo/api/_info"),J()]);case 4:p=n.sent,h=(0,o.Z)(p,2),x=h[0],Z=h[1],y=null!==(t=null!==(r=null!==(l=null===x||void 0===x||null===(i=x.data)||void 0===i?void 0:i.result)&&void 0!==l?l:null===x||void 0===x?void 0:x.data)&&void 0!==r?r:null===x||void 0===x||null===(c=x.data)||void 0===c?void 0:c.data)&&void 0!==t?t:null===x||void 0===x?void 0:x.data,w=null!==(s=null!==(u=null!==(v=null===Z||void 0===Z||null===(m=Z.data)||void 0===m?void 0:m.result)&&void 0!==v?v:null===Z||void 0===Z?void 0:Z.data)&&void 0!==u?u:null===Z||void 0===Z||null===(f=Z.data)||void 0===f?void 0:f.data)&&void 0!==s?s:null===Z||void 0===Z?void 0:Z.data,j="object"===typeof w&&null!==w?w:{},C({show_columns:(g="object"===typeof y&&null!==y?y:{}).show_columns||[],edit_columns:g.edit_columns||[],label_columns:g.label_columns||{},description_columns:g.description_columns||{},show_title:g.show_title,edit_title:g.edit_title}),H(j),N={},(g.edit_columns||[]).forEach((function(e){var n=e.name,t=j[n];N[n]=null!=t&&""!==t?String(t):""})),D(N),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(1),d.ZP.error(e("\u52a0\u8f7d\u7528\u6237\u4fe1\u606f\u5931\u8d25")||"\u52a0\u8f7d\u7528\u6237\u4fe1\u606f\u5931\u8d25");case 22:return n.prev=22,b(!1),n.finish(22);case 25:case"end":return n.stop()}}),n,null,[[1,19,22,25]])})));return function(){return n.apply(this,arguments)}}(),le=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(){var t,r,l,i,o,c,s,u,v;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,J();case 3:c=n.sent,s=null!==(t=null!==(r=null!==(l=null===c||void 0===c||null===(i=c.data)||void 0===i?void 0:i.result)&&void 0!==l?l:null===c||void 0===c?void 0:c.data)&&void 0!==r?r:null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.data)&&void 0!==t?t:null===c||void 0===c?void 0:c.data,H(u="object"===typeof s&&null!==s?s:{}),v={},((null===E||void 0===E?void 0:E.edit_columns)||[]).forEach((function(e){var n=e.name,t=u[n];v[n]=null!=t&&""!==t?String(t):""})),D(v),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),d.ZP.error(e("\u52a0\u8f7d\u7528\u6237\u4fe1\u606f\u5931\u8d25")||"\u52a0\u8f7d\u7528\u6237\u4fe1\u606f\u5931\u8d25");case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(){return n.apply(this,arguments)}}(),ae=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(){var t,r,l,i,o,s,u,v,m,f,p,h,b,x;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(E){n.next=2;break}return n.abrupt("return");case 2:t=E.description_columns||{},r=function(e,n){var r,l=t[e];return null!=l&&""!==l?String(l):null!==(r=n.description)&&void 0!==r?r:""},l={},i=null,o=(0,c.Z)(E.edit_columns||[]),n.prev=7,o.s();case 9:if((s=o.n()).done){n.next=27;break}if(m=s.value,f=m.name,p=null!==(u=I[f])&&void 0!==u?u:"","password"!==f){n.next=21;break}if(!p.trim()){n.next=18;break}p=p.trim(),n.next=19;break;case 18:return n.abrupt("continue",25);case 19:n.next=22;break;case 21:p=p.trim();case 22:h=null!=m.label&&String(m.label).trim()||(null===(v=E.label_columns)||void 0===v?void 0:v[f])||f,null!=(b=Y(p,m.validators,{description:r(f,m),label:h}))&&""!==b&&(l[f]=b,i||(i=b));case 25:n.next=9;break;case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(7),o.e(n.t0);case 32:return n.prev=32,o.f(),n.finish(32);case 35:if(!i){n.next=38;break}return te(l),n.abrupt("return");case 38:return te({}),x={},((null===E||void 0===E?void 0:E.edit_columns)||[]).forEach((function(e){var n,t,r=e.name;if("password"!==r)x[r]=null!==(n=null===(t=I[r])||void 0===t?void 0:t.trim())&&void 0!==n?n:"";else{var l=I[r];l&&l.trim()&&(x[r]=l.trim())}})),w(!0),n.prev=42,n.next=45,a=x,$.Z.post("/userinfo/api/current/userinfo",a);case 45:d.ZP.success(e("\u4fdd\u5b58\u6210\u529f")||"\u4fdd\u5b58\u6210\u529f"),S(!1),le(),n.next=53;break;case 50:n.prev=50,n.t1=n.catch(42),d.ZP.error(e("\u4fdd\u5b58\u5931\u8d25")||"\u4fdd\u5b58\u5931\u8d25");case 53:return n.prev=53,w(!1),n.finish(53);case 56:case"end":return n.stop()}var a}),n,null,[[7,29,32,35],[42,50,53,56]])})));return function(){return n.apply(this,arguments)}}(),ie=function(e,n){var t,a;if(D((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,n))})),E){var i=null===(t=E.edit_columns)||void 0===t?void 0:t.find((function(n){return n.name===e}));if(i){var o=E.description_columns||{},c=n;if("password"===e){if(""===c.trim())return void te((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},e,""))}));c=c.trim()}else c=n.trim();var s=null!=i.label&&String(i.label).trim()||(null===(a=E.label_columns)||void 0===a?void 0:a[e])||e,u=Y(c,i.validators,{description:function(e,n){var t,r=o[e];return null!=r&&""!==r?String(r):null!==(t=n.description)&&void 0!==t?t:""}(e,i),label:s});te((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},e,u||""))}))}else te((function(n){var t=(0,l.Z)({},n);return delete t[e],t}))}};if(u||!E)return(0,Q.jsx)("div",{className:"user-center",children:(0,Q.jsx)("div",{className:"user-center-inner user-center-loading",children:(0,Q.jsx)(v.Z,{size:"large",tip:e("\u52a0\u8f7d\u4e2d")||"\u52a0\u8f7d\u4e2d"})})});var oe=function(e){return e("\u7a7a\u63cf\u8ff0")||"\u2014"}(e),ce=E.label_columns||{},se=E.description_columns||{},ue=E.show_columns||[],de=E.edit_columns||[],ve=function(e,n){var t,r;return null!==(t=null!==(r=null===n||void 0===n?void 0:n.label)&&void 0!==r?r:ce[e])&&void 0!==t?t:e},me=function(e,n){return"active"===e?!0===n?(0,Q.jsx)(R.Z,{style:{color:"#52c41a",fontSize:18}}):!1===n?(0,Q.jsx)(V.Z,{style:{color:"#ff4d4f",fontSize:18}}):(0,Q.jsx)(W,{type:"secondary",children:oe}):"roles"===e&&null!=n&&""!==n?(0,Q.jsx)(W,{type:n?void 0:"secondary",children:"[".concat(n,"]")}):"secret"===e?(0,Q.jsx)(W,{type:"secondary",copyable:!!n,style:{wordBreak:"break-all"},children:X(n,oe)}):(0,Q.jsx)(W,{type:null!=n&&""!==n?void 0:"secondary",children:X(n,oe)})};if(N){var fe=E.edit_title||e("\u7f16\u8f91\u7528\u6237\u4fe1\u606f")||"\u7f16\u8f91\u7528\u6237\u4fe1\u606f";return(0,Q.jsx)("div",{className:"user-center",children:(0,Q.jsxs)("div",{className:"user-center-inner",children:[(0,Q.jsxs)(U,{level:5,className:"page-title",children:[fe,(0,Q.jsx)(T.Z,{className:"title-caret"})]}),de.map((function(n){var t,r,l=n.name,a=ve(l,n),i=function(e,n){var t,r=se[e];return null!=r&&""!==r?String(r):null!==(t=null===n||void 0===n?void 0:n.description)&&void 0!==t?t:""}(l,n),o="password"===l,c=!!n.disable,s=!0===n.required;return(0,Q.jsxs)("div",{className:"form-row",children:[(0,Q.jsxs)("div",{className:"label-col",children:[(0,Q.jsx)("span",{className:"label-required-slot",children:s?(0,Q.jsx)(W,{type:"danger",children:"*"}):null}),a,":"]}),(0,Q.jsxs)("div",{className:"value-col",children:[(0,Q.jsx)(m.Z.Item,{validateStatus:ne[l]?"error":void 0,style:{marginBottom:0},children:o?(0,Q.jsx)(f.Z.Password,{value:null!==(t=I[l])&&void 0!==t?t:"",onChange:function(e){return ie(l,e.target.value)},placeholder:e("\u7559\u7a7a\u5219\u4e0d\u4fee\u6539\u5bc6\u7801")||"\u7559\u7a7a\u5219\u4e0d\u4fee\u6539\u5bc6\u7801",autoComplete:"new-password",disabled:c,allowClear:!0}):(0,Q.jsx)(f.Z,{value:null!==(r=I[l])&&void 0!==r?r:"",onChange:function(e){return ie(l,e.target.value)},placeholder:a,disabled:c,allowClear:!0,type:"text"})}),(0,Q.jsxs)("div",{className:"form-extra-row",children:[ne[l]?(0,Q.jsx)("div",{className:"form-error",children:(0,Q.jsx)(W,{type:"danger",children:ne[l]})}):null,i?(0,Q.jsx)("div",{className:"form-hint",dangerouslySetInnerHTML:{__html:i}}):null]})]})]},l)})),(0,Q.jsx)("div",{className:"btn-row",children:(0,Q.jsxs)(p.Z,{children:[(0,Q.jsx)(h.Z,{icon:(0,Q.jsx)(A,{}),onClick:function(){if(E&&L){var e={};(E.edit_columns||[]).forEach((function(n){var t=n.name,r=L[t];e[t]=null!=r&&""!==r?String(r):""})),D(e)}te({}),S(!1)},children:e("\u8fd4\u56de")||"\u8fd4\u56de"}),(0,Q.jsx)(h.Z,{type:"primary",icon:(0,Q.jsx)(O,{}),onClick:ae,loading:y,children:y?e("\u4fdd\u5b58\u4e2d")||"\u4fdd\u5b58\u4e2d":e("\u4fdd\u5b58")||"\u4fdd\u5b58"})]})})]})})}var pe=E.show_title||e("\u7528\u6237\u4fe1\u606f")||"\u7528\u6237\u4fe1\u606f";return(0,Q.jsx)("div",{className:"user-center",children:(0,Q.jsxs)("div",{className:"user-center-inner",children:[(0,Q.jsxs)(U,{level:5,className:"page-title",children:[pe,(0,Q.jsx)(T.Z,{className:"title-caret"})]}),(0,Q.jsx)(M,{column:1,bordered:!0,size:"small",className:"user-center-descriptions",children:ue.map((function(e){var n=L?L[e]:void 0,t=ve(e);return(0,Q.jsx)(M.Item,{label:t,children:me(e,n)},e)}))}),(0,Q.jsx)("div",{className:"btn-row",children:(0,Q.jsx)(h.Z,{type:"primary",icon:(0,Q.jsx)(G.Z,{}),onClick:function(){te(function(e){if(!E)return{};var n,t=E.description_columns||{},r=function(e,n){var r,l=t[e];return null!=l&&""!==l?String(l):null!==(r=n.description)&&void 0!==r?r:""},l={},a=(0,c.Z)(E.edit_columns||[]);try{for(a.s();!(n=a.n()).done;){var i,o,s=n.value,u=s.name,d=null!==(i=e[u])&&void 0!==i?i:"";if("password"===u){if(!d.trim())continue;d=d.trim()}else d=d.trim();var v=null!=s.label&&String(s.label).trim()||(null===(o=E.label_columns)||void 0===o?void 0:o[u])||u,m=Y(d,s.validators,{description:r(u,s),label:v});m&&(l[u]=m)}}catch(m){a.e(m)}finally{a.f()}return l}(I)),S(!0)},children:e("\u7f16\u8f91\u7528\u6237")||"\u7f16\u8f91\u7528\u6237"})})]})})}}}]);